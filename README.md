# TG Feed Bot (Lite Rewrite)

–õ–µ–≥–∫–∏–π –∏ –±—ã—Å—Ç—Ä—ã–π Telegram –±–æ—Ç –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ RSS/Atom –ª–µ–Ω—Ç –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –≤ –∫–∞–Ω–∞–ª—ã. 
–ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–ø–∏—Å–∞–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è –Ω–∞ –±–∞–∑–µ `asyncio` –∏ `aiohttp`, –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –¥–ª—è —Ä–∞–±–æ—Ç—ã –Ω–∞ —Å–ª–∞–±—ã—Ö VPS (–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏ <50–ú–ë).

> **Credits:** –≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —è–≤–ª—è–µ—Ç—Å—è —Ñ–æ—Ä–∫–æ–º –∏ –ø–æ–ª–Ω–æ–π –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–æ–π [tg-feed-bot](https://github.com/fossunited/tg-feed-bot) –æ—Ç FOSS United. –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è –∏–¥–µ—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞, –Ω–æ –∫–æ–¥–æ–≤–∞—è –±–∞–∑–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç–∏, SQLite –∏ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø–æ–¥–ø–∏—Å–æ–∫.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

*   üöÄ **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å**: –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –¥–µ—Å—è—Ç–∫–∏ —Ñ–∏–¥–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ.
*   üìù **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∫–∞–Ω–∞–ª—ã**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ RSS-–ª–µ–Ω—Ç –∏ —Ü–µ–ª–µ–≤—ã—Ö –∫–∞–Ω–∞–ª–æ–≤ –≤ –æ–¥–Ω–æ–º –±–æ—Ç–µ.
*   üé® **–®–∞–±–ª–æ–Ω–∏–∑–∞—Ü–∏—è**: –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ñ–∏–¥–∞ (–∑–∞–≥–æ–ª–æ–≤–æ–∫, —Å—Å—ã–ª–∫–∞, –¥–∞—Ç–∞, –∞–≤—Ç–æ—Ä).
*   üßπ **–û—á–∏—Å—Ç–∫–∞ —Å—Å—ã–ª–æ–∫**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ UTM-–º–µ—Ç–æ–∫ –∏ —Ç—Ä–µ–∫–µ—Ä–æ–≤ –∏–∑ URL.
*   üõ°Ô∏è **–ó–∞—â–∏—Ç–∞ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ HTML-—Å—É—â–Ω–æ—Å—Ç–µ–π –∏ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª–æ–≤.
*   üíæ **SQLite**: –ù–∞–¥–µ–∂–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–π –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ.
*   üê≥ **Docker**: –ì–æ—Ç–æ–≤ –∫ –∑–∞–ø—É—Å–∫—É —á–µ—Ä–µ–∑ Docker Compose.

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –ù–∞ —á–∏—Å—Ç–æ–º —Å–µ—Ä–≤–µ—Ä–µ Ubuntu (—Å –Ω—É–ª—è)

1.  **–û–±–Ω–æ–≤–∏—Ç–µ —Å–∏—Å—Ç–µ–º—É –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Docker + Docker Compose:**
    ```bash
    sudo apt update && sudo apt upgrade -y
    sudo apt install docker.io docker-compose -y
    sudo systemctl enable --now docker
    ```

2.  **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:**
    ```bash
    git clone https://github.com/combx/RSSTGLite.git
    cd RSSTGLite
    ```

3.  **–°–æ–∑–¥–∞–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:**
    ```bash
    cp sample_config.json config.json
    nano config.json
    ```
    *–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª, –≤—Å—Ç–∞–≤–∏–≤ —Å–≤–æ–∏ —Ç–æ–∫–µ–Ω—ã –∏ —Å—Å—ã–ª–∫–∏.*

4.  **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞:**
    ```bash
    sudo docker-compose up -d --build
    ```
    *–§–ª–∞–≥ `-d` –∑–∞–ø—É—Å–∫–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤ —Ñ–æ–Ω–µ.*

5.  **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã:**
    ```bash
    sudo docker-compose logs -f
    ```

### –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ (–±–µ–∑ Docker)

–î–ª—è –∑–∞–ø—É—Å–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –±–µ–∑ Docker (systemd, venv) –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø—Ç:

```bash
./setup.sh
```

–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: [DEPLOYMENT_NO_DOCKER.md](DEPLOYMENT_NO_DOCKER.md)

–ò–ª–∏ –≤—Ä—É—á–Ω—É—é:

1.  –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
    ```bash
    pip install -r requirements.txt
    ```
2.  –°–æ–∑–¥–∞–π—Ç–µ `config.json` (—Å–º. `sample_config.json`).
3.  –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞:
    ```bash
    python feedbot.py
    ```

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–ü—Ä–∏–º–µ—Ä `config.json`:

```json
{
  "telegram_token": "–í–ê–®_–ì–õ–û–ë–ê–õ–¨–ù–´–ô_–¢–û–ö–ï–ù",
  "database_path": "data/feedbot.db",
  "publication_delay": 2.5,
  "feeds": [
    {
        "name": "Habr",
        "url": "https://habr.com/rss/best/",
        "target_chat_id": "@channel_name",
        "check_interval": 600
    },
    {
        "name": "Private Feed",
        "url": "https://example.com/feed.xml",
        "telegram_token": "–¢–û–ö–ï–ù_–î–†–£–ì–û–ì–û_–ë–û–¢–ê",
        "target_chat_id": -1001234567890
    }
  ]
}
```

### –§–æ—Ä–º–∞—Ç—ã `target_chat_id`
*   `@channelname` ‚Äî –ü—É–±–ª–∏—á–Ω—ã–π –∫–∞–Ω–∞–ª (–±–æ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∞–¥–º–∏–Ω–æ–º).
*   `-100xxxxxxxxx` ‚Äî –ü—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–∞–Ω–∞–ª –∏–ª–∏ —Å—É–ø–µ—Ä–≥—Ä—É–ø–ø–∞ (ID –≤—Å–µ–≥–¥–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `-100`).
*   `12345678` ‚Äî –õ–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω —Å–Ω–∞—á–∞–ª–∞ –Ω–∞–ø–∏—Å–∞—Ç—å –±–æ—Ç—É `/start`).

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø—Ü–∏–∏
*   `publication_delay` (–≥–ª–æ–±–∞–ª—å–Ω–æ): –ó–∞–¥–µ—Ä–∂–∫–∞ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö –º–µ–∂–¥—É –æ—Ç–ø—Ä–∞–≤–∫–æ–π —Å–æ–æ–±—â–µ–Ω–∏–π (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 2.5). –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 2-3 —Å–µ–∫—É–Ω–¥—ã –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –ª–∏–º–∏—Ç–æ–≤ Telegram (20 —Å–æ–æ–±—â–µ–Ω–∏–π/–º–∏–Ω –≤ –æ–¥–∏–Ω –∫–∞–Ω–∞–ª).
*   `telegram_token` (–≤–Ω—É—Ç—Ä–∏ –æ–±—ä–µ–∫—Ç–∞ feed): –ü–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **–æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –±–æ—Ç–∞** –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ñ–∏–¥–∞. –ï—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω–æ, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≥–ª–æ–±–∞–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω.

### –î–æ—Å—Ç—É–ø–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —à–∞–±–ª–æ–Ω–∞
*   `{title}`: –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∑–∞–ø–∏—Å–∏
*   `{link}`: –ì–∏–ø–µ—Ä—Å—Å—ã–ª–∫–∞ [Link](URL). –ï—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω `rhash`, –≤–µ–¥–µ—Ç –Ω–∞ Instant View.
*   `{published}`: –î–∞—Ç–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ (YYYY-MM-DD HH:MM)
*   `{author}`: –ê–≤—Ç–æ—Ä –∑–∞–ø–∏—Å–∏

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Instant View
–î–æ–±–∞–≤—å—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä `rhash` –≤ –æ–±—ä–µ–∫—Ç —Ñ–∏–¥–∞:
```json
"rhash": "–≤–∞—à_rhash_–∫–æ–¥"
```
–≠—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç —Å—Å—ã–ª–∫–∏ –≤ —Ñ–æ—Ä–º–∞—Ç `t.me/iv?url=...&rhash=...`.

## –õ–∏—Ü–µ–Ω–∑–∏—è

–ö–æ–¥ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è —Å–≤–æ–±–æ–¥–Ω–æ. –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è –ª–∏—Ü–µ–Ω–∑–∏—è –ø—Ä–æ–µ–∫—Ç–∞-–ø—Ä–∞—Ä–æ–¥–∏—Ç–µ–ª—è: MIT.
